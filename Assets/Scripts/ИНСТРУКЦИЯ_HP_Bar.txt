═══════════════════════════════════════════════════════════════
    ❤️ HP БАР НАД ПЕРСОНАЖАМИ - НАСТРОЙКА
═══════════════════════════════════════════════════════════════

📦 СОЗДАННЫЕ КОМПОНЕНТЫ:
────────────────────────────────────────────────────────────────
✅ HealthBar.cs - Компонент HP бара с автообновлением
✅ CharacterController - Обновлён для работы с HP баром

═══════════════════════════════════════════════════════════════
📋 ШАГ 1: СОЗДАНИЕ HP БАРА В ПРЕФАБЕ
═══════════════════════════════════════════════────────════════

1. Откройте префаб Character (Assets/Prefabs/Character.prefab)

2. В Hierarchy префаба создайте структуру:

Character (корневой объект)
├── Image (спрайт персонажа)
├── Animator
└── HealthBarCanvas ← СОЗДАТЬ!
    └── HealthBar ← СОЗДАТЬ!
        ├── Background ← СОЗДАТЬ!
        └── Fill ← СОЗДАТЬ!

Пошагово:

A. ПКМ на Character → UI → Canvas
   - Назовите "HealthBarCanvas"
   - Rect Transform:
     • Anchors: Middle-Top
     • Pos Y: 60 (над персонажем)
     • Width: 80
     • Height: 10

B. ПКМ на HealthBarCanvas → UI → Image
   - Назовите "HealthBar"
   - Add Component → Health Bar (Script)
   - Rect Transform:
     • Stretch-Stretch (по всей ширине Canvas)
     • Width: 0, Height: 10

C. ПКМ на HealthBar → UI → Image
   - Назовите "Background"
   - Image → Color: чёрный (или тёмно-серый)
   - Rect Transform: Stretch-Stretch

D. ПКМ на HealthBar → UI → Image
   - Назовите "Fill"
   - Image → Image Type: Filled
   - Fill Method: Horizontal
   - Fill Origin: Left
   - Fill Amount: 1 (полный)
   - Color: зелёный
   - Rect Transform: Stretch-Stretch

═══════════════════════════════════════════════════════════════
📋 ШАГ 2: НАСТРОЙКА КОМПОНЕНТА HEALTH BAR
═══════════════════════════════════════════════════════════════

Выберите объект HealthBar → Inspector → Health Bar (Script):

┌─────────────────────────────────────────────────────────────┐
│ Health Bar (Script)                                         │
├─────────────────────────────────────────────────────────────┤
│ ▼ Ссылки                                                    │
│   Fill Image: Fill ⭐ (перетащите объект Fill)             │
│   Background Image: Background (опционально)                │
│   Hp Text: None (пока без текста)                          │
│                                                             │
│ ▼ Настройки                                                 │
│   Full Health Color: ████ Зелёный (0, 255, 0)              │
│   Mid Health Color:  ████ Жёлтый (255, 255, 0)             │
│   Low Health Color:  ████ Красный (255, 0, 0)              │
│   Low Health Threshold: 0.3                                 │
│   Hide When Full: ☐ (показывать всегда)                    │
│   Smooth Transition: ✓ (плавное изменение)                 │
│   Transition Speed: 5                                       │
└─────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════
📋 ШАГ 3: ПОДКЛЮЧЕНИЕ К CHARACTER CONTROLLER
═══════════════════════════════════════════════════════════════

Выберите корневой объект Character → Inspector → Character Controller:

┌─────────────────────────────────────────────────────────────┐
│ Character Controller (Script)                               │
├─────────────────────────────────────────────────────────────┤
│ ▼ Конфигурация                                              │
│   Config: Warrior                                           │
│                                                             │
│ ▼ Ссылки                                                    │
│   Character Animator: Character Animator                    │
│   Health Bar: HealthBar ⭐ (перетащите HealthBar объект!)  │
│                                                             │
│ ▼ Настройки                                                 │
│   Show Debug: ✓                                             │
└─────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════
📋 ШАГ 4: ПОВТОРИТЬ ДЛЯ ПРЕФАБА ВРАГА
═══════════════════════════════════════════════════════════════

Откройте Assets/Prefabs/Enamy.prefab

Повторите ШАГ 1-3 для префаба врага!

Или БЫСТРЫЙ СПОСОБ:
1. Скопируйте HealthBarCanvas из Character
2. Вставьте в Enamy (Ctrl+C → Ctrl+V)
3. Назначьте Health Bar в CharacterController

═══════════════════════════════════════════════════════════════
📋 ШАГ 5: НАСТРОЙКА CANVAS (ВАЖНО!)
═══════════════════════════════════════════════════════════════

HealthBarCanvas → Inspector:

┌─────────────────────────────────────────────────────────────┐
│ Canvas                                                      │
│   Render Mode: World Space ⭐                              │
│   Sort Order: 10 (поверх персонажей)                       │
│                                                             │
│ Canvas Scaler                                               │
│   (можно удалить)                                           │
│                                                             │
│ Graphic Raycaster                                           │
│   (можно удалить - HP бар не кликабельный)                 │
└─────────────────────────────────────────────────────────────┘

Rect Transform:
┌─────────────────────────────────────────────────────────────┐
│ Rect Transform                                              │
│   Pos X: 0                                                  │
│   Pos Y: 60 (над головой персонажа)                        │
│   Pos Z: 0                                                  │
│   Width: 80                                                 │
│   Height: 10                                                │
│   Scale: X:0.1  Y:0.1  Z:1 (чтобы HP бар был маленьким)   │
└─────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════
🎨 УЛУЧШЕННЫЙ ДИЗАЙН (ОПЦИОНАЛЬНО)
═══════════════════════════════════════════════════════════════

1. ДОБАВИТЬ ТЕКСТ HP:
   
   HealthBar → ПКМ → UI → Text - TextMeshPro
   - Назовите "HPText"
   - Font Size: 24
   - Alignment: Center
   - Color: белый
   - Перетащите в Health Bar → Hp Text

2. ДОБАВИТЬ РАМКУ:
   
   HealthBar → ПКМ → UI → Image
   - Назовите "Border"
   - Color: белый/чёрный
   - Rect Transform: Stretch + немного больше

3. ГРАДИЕНТ ФОНА:
   
   Background → Add Component → Gradient
   (или используйте спрайт с градиентом)

═══════════════════════════════════════════════════════════════
🧪 ТЕСТИРОВАНИЕ
═══════════════════════════════════════════════════════════════

1. Запустите игру (Play)
2. Разместите героев
3. Нажмите START
4. Персонажи начнут атаковать
5. HP бар должен:
   ✓ Показываться над персонажами
   ✓ Уменьшаться при получении урона
   ✓ Менять цвет (зелёный → жёлтый → красный)
   ✓ Плавно анимироваться

═══════════════════════════════════════════════════════════════
💡 НАСТРОЙКИ ДЛЯ РАЗНЫХ СТИЛЕЙ
═══════════════════════════════════════════════════════════════

МИНИМАЛИСТИЧНЫЙ:
  Hide When Full: ✓ (показывать только при уроне)
  Smooth Transition: ☐
  Без текста HP

ИНФОРМАТИВНЫЙ:
  Hide When Full: ☐
  Hp Text: HPText (показывать числа)
  Smooth Transition: ✓

СТИЛЬНЫЙ:
  Full Health Color: Cyan
  Mid Health Color: Orange
  Low Health Color: Purple
  Добавить рамку и тень

═══════════════════════════════════════════════════════════════
🐛 ЧАСТЫЕ ПРОБЛЕМЫ
═══════════════════════════════════════════════════════════════

ПРОБЛЕМА: HP бар не виден
РЕШЕНИЕ:
  - HealthBarCanvas → Render Mode: World Space
  - Canvas → Sort Order: увеличьте (10-20)
  - HealthBar → Rect Transform → Scale проверьте

ПРОБЛЕМА: HP бар слишком большой/маленький
РЕШЕНИЕ:
  - HealthBarCanvas → Rect Transform → Scale: 0.1
  - HealthBarCanvas → Width/Height настройте

ПРОБЛЕМА: HP бар не обновляется
РЕШЕНИЕ:
  - Character Controller → Health Bar: назначен?
  - HealthBar → Fill Image: назначен?

ПРОБЛЕМА: HP бар за персонажем
РЕШЕНИЕ:
  - HealthBarCanvas → Canvas → Sort Order: увеличьте

═══════════════════════════════════════════════════════════════
✅ ГОТОВО!
═══════════════════════════════════════════════════════════════

Теперь над всеми персонажами будет HP бар который:
✓ Автоматически обновляется при уроне
✓ Плавно меняет цвет в зависимости от HP
✓ Красиво анимируется

═══════════════════════════════════════════════════════════════

