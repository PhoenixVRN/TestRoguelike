═══════════════════════════════════════════════════════════════
    ⚔️ НАСТРОЙКА АНИМАЦИЙ АТАКИ
═══════════════════════════════════════════════════════════════

Анимация УЖЕ вызывается в коде! Нужно правильно настроить префаб.

═══════════════════════════════════════════════════════════════
🔍 ШАГ 1: ПРОВЕРЬТЕ ПРЕФАБ CHARACTER
═══════════════════════════════════════════════════════════════

Откройте Assets/Prefabs/Character.prefab

Проверьте что есть компоненты:

Character (корневой объект):
├── Rect Transform ✓
├── Image ✓
├── Animator ⭐ ДОЛЖЕН БЫТЬ!
├── Character Animator (Script) ⭐ ДОЛЖЕН БЫТЬ!
└── Character Controller (Script) ✓

Если НЕТ Animator:
  → Add Component → Animator

Если НЕТ Character Animator:
  → Add Component → Character Animator

═══════════════════════════════════════════════════════════════
🔧 ШАГ 2: НАСТРОИТЬ ANIMATOR
═══════════════════════════════════════════════════════════════

Character → Animator (Component):

┌─────────────────────────────────────────────────────────────┐
│ Animator                                                    │
│   Controller: Character ⭐                                  │
│   Avatar: None                                              │
│   Apply Root Motion: ☐                                      │
│   Update Mode: Normal                                       │
└─────────────────────────────────────────────────────────────┘

Controller должен указывать на:
  Assets/Animation/Character.controller

Если его нет - создайте:
  1. Assets/Animation → ПКМ → Create → Animator Controller
  2. Назовите "Character"

═══════════════════════════════════════════════════════════════
🎬 ШАГ 3: НАСТРОИТЬ ANIMATOR CONTROLLER
═══════════════════════════════════════════════════════════════

Откройте Character.controller (двойной клик)

Окно Animator откроется. Создайте структуру:

┌─────────────────────────────────────────────────────────────┐
│ Animator                                                    │
│                                                             │
│  Entry → [Idle] ⇄ [Move]                                  │
│            ↕         ↕                                      │
│          [Attack]  [Death]                                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘

Создать состояния:

1. ПКМ → Create State → Empty
   - Назвать "Idle"
   - Motion: IdleCharacter (перетащить)
   - Set as Layer Default State (ПКМ на Idle)

2. Создать "Move"
   - Motion: MoveCharacter

3. Создать "Attack"
   - Motion: AttackCharacter

4. Создать "Death"
   - Motion: DeathCharacter

═══════════════════════════════════════════════════════════════
🔗 ШАГ 4: СОЗДАТЬ ПЕРЕХОДЫ (TRANSITIONS)
═══════════════════════════════════════════════════════════════

A. Создать параметры (Parameters):
   
   ┌─────────────────────────────────────┐
   │ Parameters                          │
   ├─────────────────────────────────────┤
   │ + Idle    (Trigger)                │
   │ + Move    (Trigger)                │
   │ + Attack  (Trigger)                │
   │ + Death   (Trigger)                │
   │ + IsDead  (Bool)                   │
   └─────────────────────────────────────┘

   Нажмите "+" → Trigger для каждого

B. Создать переходы:

   Idle → Move:
     - Условие: Move (trigger)
     - Has Exit Time: ☐
     - Transition Duration: 0

   Move → Idle:
     - Условие: Idle (trigger)
     - Has Exit Time: ☐
     - Transition Duration: 0

   Idle → Attack:
     - Условие: Attack (trigger)
     - Has Exit Time: ☐
     - Transition Duration: 0.1

   Attack → Idle:
     - Условие: НЕТ (автоматически после анимации)
     - Has Exit Time: ✓
     - Exit Time: 0.9
     - Transition Duration: 0.1

   Idle → Death:
     - Условие: Death (trigger)
     - Has Exit Time: ☐

   Move → Death:
     - Условие: Death (trigger)
     - Has Exit Time: ☐

   Attack → Death:
     - Условие: Death (trigger)
     - Has Exit Time: ☐

═══════════════════════════════════════════════════════════════
🔗 ШАГ 5: ПОДКЛЮЧИТЬ CHARACTER ANIMATOR К CONTROLLER
═══════════════════════════════════════════════════════════════

Character (префаб) → Character Controller (Script):

┌─────────────────────────────────────────────────────────────┐
│ Character Controller                                        │
│   Config: Warrior                                           │
│   Character Animator: Character Animator ⭐                 │
│   Health Bar: HealthBar                                     │
└─────────────────────────────────────────────────────────────┘

Если поле пустое:
  → Перетащите компонент "Character Animator"
     с ЭТОГО ЖЕ объекта в это поле!

═══════════════════════════════════════════════════════════════
🎨 ШАГ 6: ВКЛЮЧИТЬ ОТЛАДКУ АНИМАЦИЙ
═══════════════════════════════════════════════════════════════

Character → Character Animator (Script):

┌─────────────────────────────────────────────────────────────┐
│ Character Animator (Script)                                 │
│   Show Debug: ✓  ← ВКЛЮЧИТЬ!                              │
└─────────────────────────────────────────────────────────────┘

Теперь в Console будут логи:
  "Warrior: Attack анимация"

═══════════════════════════════════════════════════════════════
💾 ШАГ 7: СОХРАНИТЬ
═══════════════════════════════════════════════════════════════

1. Character.controller → Ctrl+S (сохранить)
2. Character.prefab → Apply All
3. Повторить для Enamy.prefab!

═══════════════════════════════════════════════════════════════
🧪 ТЕСТ
═══════════════════════════════════════════════════════════════

1. Play
2. Поставьте героев
3. START
4. Персонажи двигаются
5. При атаке должна проиграть анимация Attack! ⚔️

Console покажет:
  "Warrior: Attack анимация"

═══════════════════════════════════════════════════════════════
🐛 ЧАСТЫЕ ПРОБЛЕМЫ
═══════════════════════════════════════════════════════════════

ПРОБЛЕМА: Анимация не играет
РЕШЕНИЕ:
  1. Character Animator назначен в CharacterController?
  2. Animator → Controller назначен?
  3. В Controller есть параметры (Attack trigger)?
  4. Show Debug включён? Проверьте Console!

ПРОБЛЕМА: "NullReferenceException"
РЕШЕНИЕ:
  Character Controller → Character Animator: назначьте!

ПРОБЛЕМА: Персонаж застывает в атаке
РЕШЕНИЕ:
  Attack → Idle переход:
    Has Exit Time: ✓
    Exit Time: 0.9

ПРОБЛЕМА: Анимация слишком быстрая/медленная
РЕШЕНИЕ:
  Animator → Attack → Speed: измените (1 = нормально)

═══════════════════════════════════════════════════════════════
💡 УЛУЧШЕНИЯ
═══════════════════════════════════════════════════════════════

1. ANIMATION EVENTS (урон в момент удара):
   
   AttackCharacter.anim → откройте
   В окне Animation:
     - Найдите кадр момента удара
     - Добавьте Event
     - Function: OnAttackHit
     
   CharacterAnimator уже имеет этот метод!

2. ЗВУКИ:
   
   Animation Event → Function: PlayAttackSound
   Создайте метод в CharacterAnimator для звука

3. ЭФФЕКТЫ:
   
   Animation Event → Function: SpawnAttackEffect
   Спавните партиклы в момент удара

═══════════════════════════════════════════════════════════════
✅ ГОТОВО!
═══════════════════════════════════════════════════════════════

Теперь при атаке будет играть анимация! ⚔️

═══════════════════════════════════════════════════════════════

